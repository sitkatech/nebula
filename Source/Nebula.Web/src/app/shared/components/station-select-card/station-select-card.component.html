<div class="card">
    <div class="card-header text-center">
        Station Selection
    </div>
    <div class="card-body table-responsive">
        <div class="row">
            <div class="col-md-8">
                <nebula-station-select-map [mapID]="mapID"
                    [defaultSelectedFilter]="defaultSelectedMapFilter"
                    (selectedStationPropertiesUpdateEvent)="updateSelectedStation($event)"
                    (displayingTributaryAreaLayerUpdateEvent)="updateCanZoomTributaryArea($event)">
                </nebula-station-select-map>
            </div>
            <div class="col-md-4">
                <ng-container *ngIf="!selectedSiteName">
                    <p>Click a station on the map to get started!</p>
                </ng-container>
                <ng-container *ngIf="selectedSiteName">
                    <dl class="row">
                        <dt class="text-sm-left col-sm-6 col-xs-12">Selected Station:</dt>
                        <dd class="col-sm-6 col-xs-12">
                            {{selectedSiteName}}
                        </dd>
                        <dd class="col-sm-6 offset-sm-6 col-md-12 offset-md-0 col-xs-12">
                            <em *ngIf="!canViewTributaryArea">No Tributary Information Available</em>
                            <button *ngIf="canViewTributaryArea && !canZoomTributaryArea" (click)="viewTributaryArea()" class="btn btn-sm btn-nebula float-md-right"><i class="fas fa-map-marker-alt"></i> View Tributary Area</button>
                            <button *ngIf="canViewTributaryArea && canZoomTributaryArea" (click)="zoomInOnTributaryArea()" class="btn btn-sm btn-nebula float-md-right"><i class="fas fa-search-plus"></i> Zoom to Tributary Area</button>
                        </dd>
                    </dl>
                    <dl class="row">
                        <dt class="text-sm-left col-sm-6 col-xs-12">Data Available:</dt>
                    </dl>
                    <dl class="row" style="max-height:600px; overflow-y:auto">
                        <dt *ngIf="gettingAvailableVariables"
                            class="text-sm-left col-sm-9 offset-sm-1 col-xs-12">
                            Fetching available variables <span class="fa fa-spinner loading-spinner"></span>
                        </dt>
                        <ng-container *ngIf="!gettingAvailableVariables">
                            <span class="text-sm-left col-sm-11 offset-sm-1 col-xs-12 mb-1"
                                *ngIf="!siteSelectedAndVariablesFound()">No variables found for selected
                                station. Please make another selection</span>
                            <ng-container *ngIf="siteSelectedAndVariablesFound()">
                                <dt class="text-sm-left col-sm-11 offset-sm-1 col-xs-12 mb-1"
                                    *ngFor="let variable of selectedSiteAvailableVariables">
                                    <div class="row no-gutters">
                                        <div class="col-9">
                                            {{variable.name}}
                                            <br />
                                            <ng-container *ngIf="variable.gage != null">
                                                <small style="font-weight:400">Gage:
                                                    {{variable.gage}}</small>
                                                <br />
                                            </ng-container>
                                            <small style="font-weight:400"
                                                *ngIf="variable.startDate != null && variable.endDate != null">Record:
                                                {{variable.startDate}} -
                                                {{variable.endDate}}</small>
                                        </div>
                                        <div *ngIf="variableNameCanBeAddedToSelection(variable.name)" class="col-3 align-self-center text-center">
                                            <button class="btn btn-sm btn-nebula"
                                                [disabled]="!variableNotPresentInSelectedVariables(variable) || disableAddingVariables"
                                                (click)="addVariableToSelection(variable)">Add</button>
                                        </div>
                                    </div>
                                </dt>
                            </ng-container>
                        </ng-container>
                    </dl>
                </ng-container>
            </div>
        </div>
    </div>
</div>